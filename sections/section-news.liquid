{%- assign _section  = section.settings -%}

{%- if _section.show_for == 'member' -%}
	{%- if customer -%}
		{%- assign show_section = true -%}
	{%- else -%}
		{%- assign show_section = false -%}
	{%- endif -%}
{%- else -%}
	{%- if customer -%}
		{%- assign show_section = false -%}
	{%- else -%}
		{%- assign show_section = true -%}
	{%- endif -%}
{%- endif -%}

{%- if show_section -%}
	<section class="section-news">
		<div class="shell shell--smaller">
			<div class="section__inner">
				{%- if _section.image != blank -%}
					<div class="section__image" style="background-image: url('{{ _section.image | img_url: '2048x' }}')"></div><!-- /.section__image -->
				{%- endif -%}

				<div class="section__content">
					{%- if _section.title != blank -%}
						<h2>{{ _section.title }}</h2>
					{%- endif -%}

					{%- if _section.content != blank -%}
						<p>{{ _section.content }}</p>
					{%- endif -%}

					{%- if _section.button_label != blank and _section.button_link != blank -%}
						<a href="{{ _section.button_link }}" class="btn btn--alt">
							{{ _section.button_label }}
						</a>
					{%- endif -%}
				</div><!-- /.section__content -->
			</div><!-- /.section__inner -->
		</div><!-- /.shell -->
	</section><!-- /.section-news -->
{%- endif -%}

{% schema %}
{
	"name": "News",
	"settings": [
		{
			"type": "select",
			"id": "show_for",
			"label": "Show For",
			"options": [
		      {
		        "value": "member",
		        "label": "Member User"
		      },
		      {
		        "value": "new",
		        "label": "New User"
		      }
		    ],
		    "default":   "new"
		},
		{
			"type": "text",
			"id": "title",
			"label": "Title"
		},
		{
			"type": "textarea",
			"id": "content",
			"label": "Content"
		},
		{
			"type": "image_picker",
			"id": "image",
			"label": "Background Image",
			"info": "Recommended width: 1500px or above."
		},
		{
			"type": "text",
			"id": "button_label",
			"label": "Button Label"
		},
		{
			"type": "url",
			"id": "button_link",
			"label": "Button Link"
		}
	],
	"presets": [
		{
			"name": "News"
		}
	]
}
{% endschema %}
